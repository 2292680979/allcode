1. 搜索引擎：一般由索引链与搜索组件组成

   > 1. 索引链：由以下几个独立步骤一次完成：检索原始内容，根据原始内容来创建对应的文档，对创建的文档进行索引。
   > 2. 搜索组件：用于接收用户查询的请求并返回相应的结果，一般由用户接口，构建可编程查询语句的方法，查询语句执行引擎，结果展示组件组成。Lucene（由java开发的搜索类库）提供了核心索引和搜索模块（即查询语句的执行），而ES利用Lucene进行文档索引，并向用户提供搜索组件（即用户界面，查询语句的构建与结果展示），所以ES结合了Lucene更像一个完整的搜索引擎。

2. Solr与ES的区别：当单纯的对已有的数据进行搜索时，Solr更快。当实时建立索引时，Solr会产生io阻塞，ES更快。随着数据量的增加，Solr的搜索效率会变得更低，而ES没有明显变化。Solr利用ZK进行分布式管理，而ES自身带有分布式协调管理功能。Solr支持更多格式的数据，比如JSON,XML,CSV。而ES仅支持JSON。Solr查询快，但更新索引慢。

3. 索引步骤：获取内容，建立文档，文档分析，文档索引。

   > 1. 文档分析：搜索引擎需要先将文本分割成一系列被称为语汇单元（token）的独立原子元素，此过程即为文档分析。每个token大致能与自然语言中的单词对应起来，文档分析就是确定文档中文本域如何分割成token序列，此即为分词。

4. ES基本概念：

   > 1. 索引（index）：ES将数据存储于一个或多个索引中，索引是具有类似特征的文档的集合。相当于一个**数据库**。索引由其名称进行标识，并通过此名称完成文档的创建，搜索，更新及删除操作。
   > 2. 类型（type）：一个索引内部可定义一个或多个类型，类型是索引内部的逻辑分区，相当于数据库中的**表**。例如在一个索引中，可以为用户数据定义一个类型，为日志数据定义一个类型。
   > 3. 文档（document）：是Lucene索引和搜索的原子单位，是包含一个或多个域的容器，基于json格式进行表示，相当于一**行**。每一个域（Field）拥有一个名字及一个或多个值，一个域相当于一**列**。
   > 4. 映射（Mapping）：所有文档在存储前都要首先进行分析，用户可根据需要定义如何将文本分割成token，那些token应该被过滤掉，以及那些文本需要额外进行处理等等。
   > 5. 结点（Node）：运行了单个实例的ES主机称为结点，他是集群的一个成员，可以存储数据，参与集群索引及搜索操作。结点通过其名称进行标识，结点通过为其配置的ES集群名称确定其所要加入的集群。
   > 6. 分片（Shard）与副本（Replica）：分片机制可将一个索引内部的数据分布地存储在多个结点，他通过将一个索引切分为多个底层物理的Lucene索引（即分片，每个分片内部都是一个全功能且独立的索引）完成索引数据的分割存储功能，创建索引时，用户可指定其分片数量，默认为5个。Shard有两种类型：primary shard与replica shard，primary即是上文的shard，创建完成后数量不可更改，replica是primary的副本，用于冗余数据及提高搜索性能。每个primary可以配置一个或多个replica，默认一个，其数量可动态更改。

5. 索引：ES使用B-Tree，倒排索引（即根据索引查找文档，每个索引都有一个Posting List的数组，记录了相关文档的id）。通过Term Dictionary（把所有索引排成二叉树）与Term Index（把相同前缀的索引排成二叉树）记录索引，以加快大数据时的查询性能，以Term来排序，其中Term即为Field。

6. 





















