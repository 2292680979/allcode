1. TCP三次握手四次挥手的原因：

   

​                               ![image-20200723131012125](D:\源码\笔记\图片\image-20200723131012125-1596264316784.png)

​											![image-20200723131020097](C:\Users\谢杰辉\AppData\Roaming\Typora\typora-user-images\image-20200723131020097.png)



 

最初两端TCP进程都处于关闭状态，然后接收方进程创建传输控制块TCP，服务器进程进入**收听**（LISTEN）状态。发送方也是首先创建传输控制块TCP，然后发送SYN后进入**同步已发送状态**（SYN-SENT）。接受方收到SYN并且同意建立连接后发送SYN与ACK并且进入**同步收到**（SYN-RCVD）状态。发送方接受到确认后，还要发送一次ACK，并进入**已建立连接状态**（ESTABLISHED）。接受方收到ACK后也进入已**建立连接状态**。（为什么最后还要发送一次ACK呢/为什么要三次握手？为了防止当发送方发送多次请求建立连接的报文时，某个报文延迟到连接已经断开后才到达，这时接收方发送一个SYN,ACK报文给发送方，而发送方并不会返回任何信息给接收方（因为它的传输任务已经在上一次连接中完成了），如果没有最后一次的ACK，连接建立后，接收方会一直等待发送方发送报文，白白浪费资源，而加入了最后的ACK确认机制，当过一段时间没有接收到发送方最后的ACK时，接收方就会关闭，而不会一直等待。）A（SYN-SENT,ESTABLISHED）B（LISTEN，SYN-RCVD,ESTABLISHED）

 									![image-20200723131034669](D:\源码\笔记\图片\image-20200723131034669-1596264321525.png)

 										![image-20200723131048179](C:\Users\谢杰辉\AppData\Roaming\Typora\typora-user-images\image-20200723131048179.png)

A发送FIN后进入终止等待1状态（FIN-WAIT-1），B接受FIN并发送ACK后进入等待关闭状态（CLOSE-WAIT），这时A已经没有数据要发送了，但若B发送数据，A仍要接受。A收到ACK后进入终止等待2状态（FIN-WAIT-2）。若B已经没有要发送的数据了，则向A发送FIN，进入最后确认状态（LAST-ACK）。A发送ACK后进入时间等待（TIME-WAIT）状态，现在TCP连接还没有关闭，必须等待一定的时间（默认4分钟）A才进入CLOSED状态。B接受到ACK后立刻关闭。A（FIN-WAIT-1,FIN-WAIT-2,TIME-WAIT）B（CLOSE-WAIT,LAST-ACK）。为什么最后A要等待四分钟呢？（1.防止ACK报文丢失，当B长时间没有接受ACK报文时，会重新发送FIN+ACK报文给A，A则重新发送ACK并重新等待4分钟。）

2. 网络协议有哪些层？物理层（引脚标准等），数据链路层（PPP），网络层（IP，ARP），运输层（TCP,UDP），应用层（DNS,HTTP,STMP等）。物理层：在物理层上所传送的数据单位是比特。 物理层(physical layer)的作用是实现相邻计算机节点之间比特流的透明传送，**尽可能屏蔽掉具体传输介质和物理设备的差异**  数据链路层：数据链路层将网络层交下来的 IP 数据报**组装成帧**，在两个相邻节点间的链路上传送帧。每一帧包括数据和必要的控制信息（如同步信息，地址信息，差错控制等） 网络层：进行通信的两个计算机之间可能会经过很多个数据链路，也可能还要经过很多通信子网。网络层的任务就是**选择合适的网间路由和交换结点**， 确保数据及时传送。  运输层：就是跨主机两个进程之间通信，比如用tcp之类的，端口端口之间搭建通道，就是传输层解决的。**让两个进程可以实现通信。屏蔽了网络，物理等底层**。  应用层：应用层协议定义的是应用进程（进程：主机中正在运行的程序）间的通信和交互的规则

3. TCP与UDP的区别：1.UDP无连接  2.UDP不保证可靠交付  3.UDP面向报文，TCP面向字节流  4.UDP没有拥塞控制  5.UDP支持1对1，1对多，多对1，多对多，而TCP只能1对1 6.UDP首部开销小（只有8字节）。

4. **http状态码和每个状态码含义**：（https://juejin.im/post/590082e6a22b9d0065be1a5c#comment）1xx：代表请求已被接受，需要继续处理。这类响应是**临时响应**，只包含状态行和某些可选的响应头信息，并以空行结束。（102：处理将被继续执行）  2xx：**成功**，代表请求已成功被服务器接收、理解、并接受（200：成功，201：已创建，202：已接收但未处理）  3xx：**重定向**，代表需要客户端采取进一步的操作才能完成请求。通常，这些状态码用来重定向，后续的请求地址（重定向目标）在本次响应的Location域中指明。（301表示请求的网页已经被永久移动到新位置  **304表示请求的网页未更改，可以直接用客户端缓存**） 4xx：**客户端错误**（如400表示服务器不理解请求语法，404表示服务器找不到请求的网页）  5xx：**服务器错误**（503表示服务暂时无法使用）

5. 输入url回车后发送了什么：https://zhuanlan.zhihu.com/p/80551769 1.url解析（判断你输入的是一个合法的 URL 还是一个待搜索的关键词） 2.dns查询（查询网址的ip） 3.tcp连接（客户端发起tcp连接）  4.处理请求（服务器处理请求）  5.接受响应  6.渲染页面

6. URI和URL的区别：URI（统一资源标识符）**包括URL**（统一资源定位符）和URN，URI用来**唯一的标识**一个资源，URL是一种具体的URI，可以用来**标识**一个资源，而且还指明了如何**定位**这个资源。URI一般包括：访问资源的命名机制，存放资源的主机名，资源自身的名称，由路径表示，着重强调于资源。 URL一般包括：协议，存有该资源的主机IP地址(有时也包括端口号)，主机资源的具体地址。如目录和文件名等。

7. Get与post的区别：1.get相当于select，post相当于insert，update，delete，get请求的数据放在url中可以被看到。

    ​	![Image](D:\源码\笔记\图片\Image.png)

   Get请求不走缓存：1.在get请求后面拼接随机数或者时间戳  2.服务器端设置header(“Cache-Control: no-cache, must-revalidate”)

8. 网络7层模型：物理层，数据链路层，网络层，运输层，会话层，表示层，应用层。 多出了会话层（session，它定义了如何开始、控制和结束一个会话，包括对多个双向消息的控制和管理，以便在只完成连续消息的一部分时可以通知应用，从而使表示层看到的数据是连续的）与表示层（这一层的主要功能是定义数据格式和加密，例如FTP（文件传输协议）允许使用二进制或者ASCII传输）。

9. 路由器工作过程：收到数据包后，解封以太网帧头部，提取目的MAC地址，查看目的MAC地址是不是自己本身的MAC地址，如果不是自己的MAC地址则丢弃，如果是自己的MAC地址，上传到上层解析IP层，并判断ip地址是否是本机，如果是本机则上传到上一层，如果不是则查询路由表，匹配出接口，然后根据下一跳ip地址到ARP表中查询下一跳的MAC地址，如果没查到就发送ARP请求查找MAC地址，最后把MAC地址封装，发送。

10. 路由表：1.目标网络地址和网络掩码。发送来的IP数据报中的IP地址与网络掩码想与等于网络地址，则从此接口发送出去。（一般包括默认路由，即没在表中的网络地址都走默认路由） 2.网关，即到达目标网络的下一跳服务器地址。 3.接口，到达目标网络，本地计算机用于发送数据包的接口。

11. Arp协议：首先，每个主机都会在自己的ARP缓冲区中建立一个ARP列表，以表示IP地址和MAC地址之间的对应关系。当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包，该数据包包括的内容有：源主机 IP地址，源主机MAC地址，目的主机的IP 地址。当本网络的所有主机收到该ARP数据包时，首先检查数据包中的IP地址是否是自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果已经存在，则覆盖，然后将自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址。源主机收到ARP响应包后。将目的主机的IP和MAC地址写入ARP列表，并利用此信息发送数据。如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。

12. 拥塞控制就是为了防止过多的数据注入到网络中，这样就可以使网络中的路由器或链路不过载。 慢开始：如果立刻把大量数据字节注入到网络，那么可能会引起网络阻塞，较好的方法是从小到达逐渐增大发送窗口（拥塞窗口以字节为单位），cwnd初始为1，每经过一次传播轮次，cwnd加倍。一旦出现超时重传，TCP就把ssthresh的值设置为当前cwnd的一半，同时当前cwnd重置为1。  拥塞避免：让拥塞窗口cwnd缓慢增大，每经过一个往返时间就把cwnd+1。  快重传与快恢复：如果接受方收到一个乱序（1，3就是乱序）的报文段就立刻会送一个ACK给发送方，如果发送方一连收到3个重复的确认，就应该立刻发送接受方未收到的报文。发送方认为现在的网络可能没有出现拥塞， 那么将cwnd设置为ssthresh的大小，然后执行拥塞避免算法。

     						![image-20200723131214383](D:\源码\笔记\图片\image-20200723131214383-1596264326032.png)

13. Ping命令协议：icmp，网络层

14. http与https的区别：http以明文发送内容，不提供任何数据加密。https加入了ssl协议，ssl依靠证书来验证服务器的身份，并为浏览器和服务器之间的通信加密。1.https协议需要到ca申请证书，一般免费证书较少，因而需要一定费用。 2.http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。  3.http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。   简历https连接步骤：1.客户使用https的URL访问Web服务器，要求与Web服务器建立SSL连接。 2.Web服务器收到客户端请求后，会将网站的证书信息（证书中包含公钥）传送一份给客户端。 3.客户端的浏览器与Web服务器开始协商SSL连接的安全等级，也就是信息加密的等级。 4.客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。 5.Web服务器利用自己的私钥解密出会话密钥。  6.Web服务器利用会话密钥加密与客户端之间的通信。

     ![image-20200723134750433](D:\源码\笔记\图片\image-20200723134750433-1596264330928.png)

15. TCP流量控制：如果发送者发送数据过快，接收者来不及接收，那么就会有分组丢失。为了避免分组丢失，控制发送者的发送速度，使得接收者来得及接收，这就是流量控制。流量控制根本目的是**防止分组丢失**，它是构成TCP可靠性的一方面。流量控制由滑动窗口实现，主要的方式就是接收方返回的 ACK 中会包含自己的接收窗口的大小，并且利用大小来控制发送方的数据发送。拥塞控制与流量控制的区别：拥塞控制是作用于网络，避免出现网络负载过大。流量控制是作用于接收者，防止分组丢失。